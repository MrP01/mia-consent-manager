function n(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function t(n){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function e(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function o(n,o){return!o||"object"!==t(o)&&"function"!=typeof o?e(n):o}function r(n){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function i(n,t){return(i=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,t)}function c(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&i(n,t)}function a(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function u(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n)){var e=[],o=!0,r=!1,i=void 0;try{for(var c,a=n[Symbol.iterator]();!(o=(c=a.next()).done)&&(e.push(c.value),!t||e.length!==t);o=!0);}catch(n){r=!0,i=n}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return e}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(n){return function(n){if(Array.isArray(n)){for(var t=0,e=new Array(n.length);t<n.length;t++)e[t]=n[t];return e}}(n)||function(n){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n))return Array.from(n)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(n,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}function f(){}function d(n,t){for(var e in t)n[e]=t[e];return n}function p(n){return n()}function h(){return Object.create(null)}function g(n){n.forEach(p)}function m(n){return"function"==typeof n}function v(n,e){return n!=n?e==e:n!==e||n&&"object"===t(n)||"function"==typeof n}function b(n,t){n.appendChild(t)}function y(n,t,e){n.insertBefore(t,e||null)}function _(n){n.parentNode.removeChild(n)}function w(n){return document.createElement(n)}function C(n){return document.createTextNode(n)}function O(){return C(" ")}function $(n,t,e,o){return n.addEventListener(t,e,o),function(){return n.removeEventListener(t,e,o)}}function k(n,t,e){null==e?n.removeAttribute(t):n.getAttribute(t)!==e&&n.setAttribute(t,e)}function E(n){return Array.from(n.childNodes)}function A(n,t){t=""+t,n.data!==t&&(n.data=t)}var x;function T(n){x=n}function j(){var n=function(){if(!x)throw new Error("Function called outside component initialization");return x}();return function(t,e){var o=n.$$.callbacks[t];if(o){var r=function(n,t){var e=document.createEvent("CustomEvent");return e.initCustomEvent(n,!1,!1,t),e}(t,e);o.slice().forEach((function(t){t.call(n,r)}))}}}var P=[],S=[],L=[],N=[],I=Promise.resolve(),D=!1;function H(n){L.push(n)}var M=!1,R=new Set;function K(){if(!M){M=!0;do{for(var n=0;n<P.length;n+=1){var t=P[n];T(t),V(t.$$)}for(P.length=0;S.length;)S.pop()();for(var e=0;e<L.length;e+=1){var o=L[e];R.has(o)||(R.add(o),o())}L.length=0}while(P.length);for(;N.length;)N.pop()();D=!1,M=!1,R.clear()}}function V(n){if(null!==n.fragment){n.update(),g(n.before_update);var t=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,t),n.after_update.forEach(H)}}var B,G=new Set;function z(){B={r:0,c:[],p:B}}function U(){B.r||g(B.c),B=B.p}function F(n,t){n&&n.i&&(G.delete(n),n.i(t))}function J(n,t,e,o){if(n&&n.o){if(G.has(n))return;G.add(n),B.c.push((function(){G.delete(n),o&&(e&&n.d(1),o())})),n.o(t)}}function W(n,t){for(var e={},o={},r={$$scope:1},i=n.length;i--;){var c=n[i],a=t[i];if(a){for(var u in c)u in a||(o[u]=1);for(var l in a)r[l]||(e[l]=a[l],r[l]=1);n[i]=a}else for(var s in c)r[s]=1}for(var f in o)f in e||(e[f]=void 0);return e}function Y(n){return"object"===t(n)&&null!==n?n:{}}function q(n){n&&n.c()}function Z(n,t,e){var o=n.$$,r=o.fragment,i=o.on_mount,c=o.on_destroy,a=o.after_update;r&&r.m(t,e),H((function(){var t=i.map(p).filter(m);c?c.push.apply(c,l(t)):g(t),n.$$.on_mount=[]})),a.forEach(H)}function Q(n,t){var e=n.$$;null!==e.fragment&&(g(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function X(n,t){-1===n.$$.dirty[0]&&(P.push(n),D||(D=!0,I.then(K)),n.$$.dirty.fill(0)),n.$$.dirty[t/31|0]|=1<<t%31}function nn(n,t,e,o,r,i){var c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[-1],a=x;T(n);var u=t.props||{},l=n.$$={fragment:null,ctx:null,props:i,update:f,not_equal:r,bound:h(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:h(),dirty:c},s=!1;l.ctx=e?e(n,u,(function(t,e){var o=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:e;return l.ctx&&r(l.ctx[t],l.ctx[t]=o)&&(l.bound[t]&&l.bound[t](o),s&&X(n,t)),e})):[],l.update(),s=!0,g(l.before_update),l.fragment=!!o&&o(l.ctx),t.target&&(t.hydrate?l.fragment&&l.fragment.l(E(t.target)):l.fragment&&l.fragment.c(),t.intro&&F(n.$$.fragment),Z(n,t.target,t.anchor),K()),T(a)}var tn=function(){function t(){n(this,t)}var e,o,r;return e=t,(o=[{key:"$destroy",value:function(){Q(this,1),this.$destroy=f}},{key:"$on",value:function(n,t){var e=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return e.push(t),function(){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}}},{key:"$set",value:function(){}}])&&s(e.prototype,o),r&&s(e,r),t}(),en={NO_THANKS:{en:"No thanks",de:"Nein danke"},I_WANT_TO_CHOOSE:{en:"I want to choose",de:"Ich möchte wählen"},ACCEPT_ALL:{en:"Accept All",de:"Alle akzeptieren"},CHECK_ALL:{en:"Check All",de:"Alle wählen"},BACK:{en:"Back",de:"Zurück"},DONE:{en:"Done",de:"Fertig"},IMPRINT:{en:"Imprint",de:"Impressum"},PRIVACY_POLICY:{en:"Privacy Policy",de:"Datenschutzerklärung"}},on=function(n){var t=window.navigator.userLanguage||window.navigator.language;return en[n]?en[n][t]||en[n].en:""};function rn(n){var t,e,o,r,i,c,a,l,s,d,p,h,m,v,E,x,T,j,P,S,L,N,I,D=on("ACCEPT_ALL")+"";return{c:function(){t=w("main"),e=w("div"),o=w("span"),r=C(n[0]),i=O(),c=w("span"),a=C(n[1]),l=O(),s=w("p"),d=C(n[2]),p=O(),h=w("div"),m=w("div"),(v=w("button")).textContent="".concat(on("NO_THANKS")),E=O(),x=w("div"),(T=w("button")).textContent="".concat(on("I_WANT_TO_CHOOSE")),j=O(),P=w("div"),S=w("button"),L=C(D),k(o,"class","miconsent__headline"),k(c,"class","miconsent__subline"),k(s,"class","miconsent__info"),k(e,"class","miconsent__content"),k(m,"class","miconsent__option decline_all"),k(x,"class","miconsent__option"),k(S,"style",N="background-color: ".concat(n[3])),k(P,"class","miconsent__option accept_all"),k(h,"class","miconsent__options")},m:function(u,f){y(u,t,f),b(t,e),b(e,o),b(o,r),b(e,i),b(e,c),b(c,a),b(e,l),b(e,s),b(s,d),b(t,p),b(t,h),b(h,m),b(m,v),b(h,E),b(h,x),b(x,T),b(h,j),b(h,P),b(P,S),b(S,L),I=[$(v,"click",n[7]),$(T,"click",n[8]),$(S,"click",n[9])]},p:function(n,t){var e=u(t,1)[0];1&e&&A(r,n[0]),2&e&&A(a,n[1]),4&e&&A(d,n[2]),8&e&&N!==(N="background-color: ".concat(n[3]))&&k(S,"style",N)},i:f,o:f,d:function(n){n&&_(t),g(I)}}}function cn(n,t,e){var o=t.scripts,r=t.title,i=t.subtitle,c=t.description,a=t.highlightColor,u=j();function l(){o.forEach((function(n){return n.granted=!0})),u("done",o)}return n.$set=function(n){"scripts"in n&&e(6,o=n.scripts),"title"in n&&e(0,r=n.title),"subtitle"in n&&e(1,i=n.subtitle),"description"in n&&e(2,c=n.description),"highlightColor"in n&&e(3,a=n.highlightColor)},[r,i,c,a,u,l,o,function(){return u("close")},function(){return u("changeView","CHOOSE")},function(){return l()}]}var an=function(t){function i(t){var c;return n(this,i),nn(e(c=o(this,r(i).call(this))),t,cn,rn,v,{scripts:6,title:0,subtitle:1,description:2,highlightColor:3}),c}return c(i,tn),i}();function un(n,t,e){var o=n.slice();return o[14]=t[e],o}function ln(n){var t,e,o,r,i,c,a,u,l,s,f,d,p,h,g,m,v,E,x,T=n[14].name+"",j=n[14].description+"";function P(){for(var t,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return((t=n)[10].apply(t,[n[14]].concat(o)))}return{c:function(){t=w("div"),e=w("img"),r=O(),i=w("div"),c=w("span"),a=C(T),u=O(),l=w("small"),s=C(j),f=O(),d=w("label"),p=w("input"),g=O(),m=w("span"),E=O(),k(e,"alt","script icon"),k(e,"class","miconsent__scriptlist_item_icon"),e.src!==(o="https://www.google.com/s2/favicons?domain="+n[14].domain)&&k(e,"src",o),p.checked=h=n[14].granted,k(p,"type","checkbox"),k(m,"style",v=n[14].granted?"background-color: ".concat(n[4],"; box-shadow: 0 0 1px ").concat(n[4],";"):""),k(m,"class","slider round"),k(d,"class","switch"),k(t,"class","miconsent__scriptlist_item")},m:function(n,o){y(n,t,o),b(t,e),b(t,r),b(t,i),b(i,c),b(c,a),b(i,u),b(i,l),b(l,s),b(t,f),b(t,d),b(d,p),b(d,g),b(d,m),b(t,E),x=$(p,"change",P)},p:function(t,r){n=t,1&r&&e.src!==(o="https://www.google.com/s2/favicons?domain="+n[14].domain)&&k(e,"src",o),1&r&&T!==(T=n[14].name+"")&&A(a,T),1&r&&j!==(j=n[14].description+"")&&A(s,j),1&r&&h!==(h=n[14].granted)&&(p.checked=h),17&r&&v!==(v=n[14].granted?"background-color: ".concat(n[4],"; box-shadow: 0 0 1px ").concat(n[4],";"):"")&&k(m,"style",v)},d:function(n){n&&_(t),x()}}}function sn(n){for(var t,e,o,r,i,c,a,l,s,d,p,h,m,v,E,x,T,j,P,S,L,N,I,D,H,M,R,K,V,B,G,z,U=on("CHECK_ALL")+"",F=on("DONE")+"",J=n[0],W=[],Y=0;Y<J.length;Y+=1)W[Y]=ln(un(n,J,Y));return{c:function(){t=w("main"),e=w("div"),o=w("span"),r=C(n[1]),i=O(),c=w("span"),a=C(n[2]),l=O(),s=w("div"),d=C(U),p=O(),h=w("label"),m=w("input"),E=O(),x=w("span"),j=O(),P=w("div");for(var u=0;u<W.length;u+=1)W[u].c();S=O(),L=w("div"),N=w("div"),(I=w("button")).textContent="".concat(on("BACK")),D=O(),H=w("div"),(M=w("button")).textContent="".concat(on("ACCEPT_ALL")),R=O(),K=w("div"),V=w("button"),B=C(F),k(o,"class","miconsent__headline"),k(c,"class","miconsent__info"),m.checked=v=n[8](n[0]),k(m,"type","checkbox"),k(x,"style",T=n[8](n[0])?"background-color: ".concat(n[4],"; box-shadow: 0 0 1px ").concat(n[4],";"):""),k(x,"class","slider round"),k(h,"class","switch large"),k(s,"class","miconsent__accept_all"),k(P,"class","miconsent__scriptlist"),k(e,"class","miconsent__content"),k(N,"class","miconsent__option decline_all"),k(H,"class","miconsent__option"),k(V,"style",G="background-color: ".concat(n[3])),k(K,"class","miconsent__option accept_all"),k(L,"class","miconsent__options")},m:function(u,f){y(u,t,f),b(t,e),b(e,o),b(o,r),b(e,i),b(e,c),b(c,a),b(e,l),b(e,s),b(s,d),b(s,p),b(s,h),b(h,m),b(h,E),b(h,x),b(e,j),b(e,P);for(var g=0;g<W.length;g+=1)W[g].m(P,null);b(t,S),b(t,L),b(L,N),b(N,I),b(L,D),b(L,H),b(H,M),b(L,R),b(L,K),b(K,V),b(V,B),z=[$(h,"change",n[9]),$(N,"click",n[11]),$(M,"click",n[12]),$(V,"click",n[13])]},p:function(n,t){var e=u(t,1)[0];if(2&e&&A(r,n[1]),4&e&&A(a,n[2]),1&e&&v!==(v=n[8](n[0]))&&(m.checked=v),17&e&&T!==(T=n[8](n[0])?"background-color: ".concat(n[4],"; box-shadow: 0 0 1px ").concat(n[4],";"):"")&&k(x,"style",T),81&e){var o;for(J=n[0],o=0;o<J.length;o+=1){var i=un(n,J,o);W[o]?W[o].p(i,e):(W[o]=ln(i),W[o].c(),W[o].m(P,null))}for(;o<W.length;o+=1)W[o].d(1);W.length=J.length}8&e&&G!==(G="background-color: ".concat(n[3]))&&k(V,"style",G)},i:f,o:f,d:function(n){n&&_(t),function(n,t){for(var e=0;e<n.length;e+=1)n[e]&&n[e].d(t)}(W,n),g(z)}}}function fn(n,t,e){var o=j(),r=t.scripts,i=t.title,c=t.description,a=t.highlightColor,u=t.sliderColor;function l(n,t){"ALL"===n?r.forEach((function(n){return n.granted=t.target.checked})):r.find((function(t){return t.name===n})).granted=t.target.checked,e(0,r)}function s(){r.forEach((function(n){return n.granted=!0})),o("done",r)}return n.$set=function(n){"scripts"in n&&e(0,r=n.scripts),"title"in n&&e(1,i=n.title),"description"in n&&e(2,c=n.description),"highlightColor"in n&&e(3,a=n.highlightColor),"sliderColor"in n&&e(4,u=n.sliderColor)},[r,i,c,a,u,o,l,s,function(n){return 0===n.filter((function(n){return!n.granted})).length},function(n){return l("ALL",n)},function(n,t){return l(n.name,t)},function(){return o("changeView","HOME")},function(){return s()},function(){return o("done",r)}]}var dn=function(t){function i(t){var c;return n(this,i),nn(e(c=o(this,r(i).call(this))),t,fn,sn,v,{scripts:0,title:1,description:2,highlightColor:3,sliderColor:4}),c}return c(i,tn),i}(),pn=function(n,t){var e=new Date;e.setTime(e.getTime()+31536e6),document.cookie="".concat(n,"=").concat(t,";").concat(e.toUTCString(),";path=/")},hn=function(n){var t=n.detail;!function(n){var t=new Date;t.setTime(t.getTime()+31536e6),document.cookie="mia_consent_manager="+JSON.stringify(n)+";"+t.toUTCString()+";path=/"}(t),t.forEach((function(n){if(pn(n.gtm.grantEvent,!!n.granted),n.granted){if("undefined"==typeof window||!window.dataLayer)return console.log("GTM instance could not be detected, please ensure that it is installed");dataLayer.push({event:"CM_GRANTED_".concat(n.gtm?n.gtm.grantEvent:n.name)})}}))},gn=function(n){var t=function(){for(var n="mia_consent_manager=",t=decodeURIComponent(document.cookie).split(";"),e=0;e<t.length;e++){for(var o=t[e];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(n))return JSON.parse(o.substring(n.length,o.length))}return[]}();return n.forEach((function(n){var e=t.find((function(t){return t.name===n.name}));e&&(n.granted=e.granted,pn(n.gtm.grantEvent,!!e.granted),n.consent_answered=!0)})),t.filter((function(n){return n.granted})).forEach((function(n){"undefined"!=typeof dataLayer?dataLayer.push({event:"CM_GRANTED_".concat(n.gtm?n.gtm.grantEvent:n.name)}):console.log("CANT GRANT, dataLayer not defined:",n.name)})),{scripts:n,showPromp:n.length!==n.filter((function(n){return n.consent_answered})).length}};function mn(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,o)}return e}function vn(n){var t,e,o,r,i,c,a=[yn,bn],u=[];function l(n,t){return"HOME"===n[6]?0:"CHOOSE"===n[6]?1:-1}return~(o=l(n))&&(r=u[o]=a[o](n)),{c:function(){t=w("div"),e=w("div"),r&&r.c(),k(e,"class","miconsent__container"),k(t,"class",i="miconsent "+(n[3]?"blocking":""))},m:function(n,r){y(n,t,r),b(t,e),~o&&u[o].m(e,null),c=!0},p:function(n,s){var f=o;(o=l(n))===f?~o&&u[o].p(n,s):(r&&(z(),J(u[f],1,1,(function(){u[f]=null})),U()),~o?((r=u[o])||(r=u[o]=a[o](n)).c(),F(r,1),r.m(e,null)):r=null),(!c||8&s&&i!==(i="miconsent "+(n[3]?"blocking":"")))&&k(t,"class",i)},i:function(n){c||(F(r),c=!0)},o:function(n){J(r),c=!1},d:function(n){n&&_(t),~o&&u[o].d()}}}function bn(n){for(var t,e=[n[2],{highlightColor:n[4]},{sliderColor:n[5]},{scripts:n[0]}],o={},r=0;r<e.length;r+=1)o=d(o,e[r]);var i=new dn({props:o});return i.$on("done",n[9]),i.$on("changeView",n[8]),{c:function(){q(i.$$.fragment)},m:function(n,e){Z(i,n,e),t=!0},p:function(n,t){var o=53&t?W(e,[4&t&&Y(n[2]),16&t&&{highlightColor:n[4]},32&t&&{sliderColor:n[5]},1&t&&{scripts:n[0]}]):{};i.$set(o)},i:function(n){t||(F(i.$$.fragment,n),t=!0)},o:function(n){J(i.$$.fragment,n),t=!1},d:function(n){Q(i,n)}}}function yn(n){for(var t,e=[n[1],{highlightColor:n[4]},{sliderColor:n[5]},{scripts:n[0]}],o={},r=0;r<e.length;r+=1)o=d(o,e[r]);var i=new an({props:o});return i.$on("done",n[9]),i.$on("close",n[10]),i.$on("changeView",n[8]),{c:function(){q(i.$$.fragment)},m:function(n,e){Z(i,n,e),t=!0},p:function(n,t){var o=51&t?W(e,[2&t&&Y(n[1]),16&t&&{highlightColor:n[4]},32&t&&{sliderColor:n[5]},1&t&&{scripts:n[0]}]):{};i.$set(o)},i:function(n){t||(F(i.$$.fragment,n),t=!0)},o:function(n){J(i.$$.fragment,n),t=!1},d:function(n){Q(i,n)}}}function _n(n){var t,e,o=!n[7]&&vn(n);return{c:function(){t=w("main"),o&&o.c()},m:function(n,r){y(n,t,r),o&&o.m(t,null),e=!0},p:function(n,e){var r=u(e,1)[0];n[7]?o&&(z(),J(o,1,1,(function(){o=null})),U()):o?(o.p(n,r),F(o,1)):((o=vn(n)).c(),F(o,1),o.m(t,null))},i:function(n){e||(F(o),e=!0)},o:function(n){J(o),e=!1},d:function(n){n&&_(t),o&&o.d()}}}function wn(n,t,e){var o=t.scripts,r=t.homeText,i=t.chooseText,c=t.blocking,u=t.highlightColor,l=void 0===u?"#fc6e20":u,s=t.sliderColor,f=void 0===s?"#fe886c":s,d=gn(o),p="HOME",h=!d.showPromp;return n.$set=function(n){"scripts"in n&&e(0,o=n.scripts),"homeText"in n&&e(1,r=n.homeText),"chooseText"in n&&e(2,i=n.chooseText),"blocking"in n&&e(3,c=n.blocking),"highlightColor"in n&&e(4,l=n.highlightColor),"sliderColor"in n&&e(5,f=n.sliderColor)},[o,r,i,c,l,f,p,h,function(n){e(6,p=n.detail)},function(n){hn(n),e(7,h=!0)},function(){var n=o.map((function(n){return function(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?mn(Object(e),!0).forEach((function(t){a(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):mn(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}({},n,{granted:!1})}));console.log("declined",n),hn({detail:n}),e(7,h=!0)}]}var Cn=function(t){function i(t){var c;return n(this,i),nn(e(c=o(this,r(i).call(this))),t,wn,_n,v,{scripts:0,homeText:1,chooseText:2,blocking:3,highlightColor:4,sliderColor:5}),c}return c(i,tn),i}();export default function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scripts:[]};return new Cn({target:document.body,props:n})}
//# sourceMappingURL=index.js.map
